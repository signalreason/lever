{
  "tasks": [
    {
      "task_id": "LEVER-101",
      "title": "Catalog shell behaviors and exit codes",
      "model": "gpt-5.1-codex-mini",
      "status": "completed",
      "definition_of_done": [
        "Documented all flags, defaults, and exit codes from bin/task-agent.sh and bin/ralph-loop.sh.",
        "Captured stop-reason semantics (human, blocked, dependencies, no tasks).",
        "Recorded any implicit behaviors needed for parity (workspace, prompt, logging)."
      ],
      "recommended": {
        "approach": "Create a concise mapping note to drive Rust parity and tests."
      },
      "observability": {
        "run_attempts": 1,
        "last_run_id": "20260202T002842Z-67102",
        "last_update_utc": "2026-02-02T00:30:25Z",
        "last_note": "Run 20260202T002842Z-67102 completed"
      }
    },
    {
      "task_id": "LEVER-102",
      "title": "Add missing CLI flags to lever",
      "model": "gpt-5.1-codex-mini",
      "status": "unstarted",
      "definition_of_done": [
        "lever parses --next, --workspace, --assignee, --reset-task, and --delay.",
        "Flag validation matches shell semantics (required combinations and errors).",
        "--loop parsing still accepts optional count."
      ],
      "recommended": {
        "approach": "Extend clap definitions and add validation helpers before deeper logic changes."
      }
    },
    {
      "task_id": "LEVER-103",
      "title": "Resolve workspace, tasks, and prompt paths in Rust",
      "model": "gpt-5.1-codex-mini",
      "status": "unstarted",
      "definition_of_done": [
        "Tasks file discovery uses prd.json then tasks.json when --tasks is absent.",
        "--workspace is honored and becomes the base for relative paths.",
        "Prompt and tasks files are validated for existence with clear errors."
      ],
      "recommended": {
        "approach": "Centralize path resolution so all callers use the same base directory."
      }
    },
    {
      "task_id": "LEVER-104",
      "title": "Implement task selection and stop reasons",
      "model": "gpt-5.1-codex-mini",
      "status": "unstarted",
      "definition_of_done": [
        "--task-id selects a specific task or errors if missing.",
        "--next selects the first task with status!=completed and model!=human.",
        "Exit codes and stop reasons match ralph-loop behavior for human, blocked, or unmet dependencies."
      ],
      "recommended": {
        "approach": "Introduce a stop-reason enum with explicit exit code mapping."
      }
    },
    {
      "task_id": "LEVER-105",
      "title": "Port task metadata validation",
      "model": "gpt-5.1-codex-mini",
      "status": "unstarted",
      "definition_of_done": [
        "Selected task requires title, definition_of_done entries, and recommended.approach.",
        "Missing metadata results in a clear error and non-zero exit.",
        "Behavior matches bin/task-agent.sh validation."
      ],
      "recommended": {
        "approach": "Validate task fields before any git or codex side effects."
      }
    },
    {
      "task_id": "LEVER-106",
      "title": "Port rate limit bookkeeping",
      "model": "gpt-5.1-codex-mini",
      "status": "unstarted",
      "definition_of_done": [
        "lever reads and writes .ralph/rate_limit.json consistently with shell behavior.",
        "Rate limit window and sleep behavior are preserved.",
        "Errors are surfaced if rate limit state cannot be updated."
      ],
      "recommended": {
        "approach": "Match the JSON shape and time calculations used by the bash script."
      }
    },
    {
      "task_id": "LEVER-107",
      "title": "Port git safety and workspace setup",
      "model": "gpt-5.1-codex-mini",
      "status": "unstarted",
      "definition_of_done": [
        "lever verifies git repo and captures original branch/HEAD.",
        "Dirty working tree is stashed and restored per task-agent behavior.",
        "Branch selection/creation for tasks mirrors the shell script."
      ],
      "recommended": {
        "approach": "Implement git operations with Command calls and explicit error messages."
      }
    },
    {
      "task_id": "LEVER-108",
      "title": "Port codex invocation and task status updates",
      "model": "gpt-5.1-codex-mini",
      "status": "unstarted",
      "definition_of_done": [
        "lever constructs the prompt and invokes codex with the same inputs as the shell script.",
        "Task status/observability fields are updated per current behavior.",
        "Exit codes propagate and map to the correct stop reasons."
      ],
      "recommended": {
        "approach": "Translate the bash sequence into structured Rust steps with explicit error handling."
      }
    },
    {
      "task_id": "LEVER-109",
      "title": "Implement loop driver in Rust",
      "model": "gpt-5.1-codex-mini",
      "status": "unstarted",
      "definition_of_done": [
        "--loop runs continuously when no count is provided (or 0) and stops on Ctrl-C.",
        "--loop N runs exactly N iterations and honors --delay between cycles.",
        "Loop exits with correct stop reason and exit code."
      ],
      "recommended": {
        "approach": "Use an atomic flag for Ctrl-C and check between iterations."
      }
    },
    {
      "task_id": "LEVER-110",
      "title": "Remove shell script dependency",
      "model": "gpt-5.1-codex-mini",
      "status": "unstarted",
      "definition_of_done": [
        "lever no longer calls bin/task-agent.sh or bin/ralph-loop.sh.",
        "bin/task-agent.sh and bin/ralph-loop.sh are removed or clearly deprecated.",
        "Any references to those scripts are cleaned from code and tests."
      ],
      "recommended": {
        "approach": "Delete scripts once Rust parity is verified to avoid regressions."
      }
    },
    {
      "task_id": "LEVER-111",
      "title": "Update documentation for shell removal",
      "model": "gpt-5.1-codex-mini",
      "status": "unstarted",
      "definition_of_done": [
        "README.md documents lever as the only entry point and removes script install steps.",
        "Loop semantics and exit codes are documented.",
        "Docs reference the new flags and defaults."
      ],
      "recommended": {
        "approach": "Keep docs concise and align wording with existing README style."
      }
    },
    {
      "task_id": "LEVER-112",
      "title": "Update tests to target lever only",
      "model": "gpt-5.1-codex-mini",
      "status": "unstarted",
      "definition_of_done": [
        "tests/ scripts call lever directly instead of shell wrappers.",
        "Tests cover task discovery, loop counts, and stop reasons.",
        "./tests/run.sh passes."
      ],
      "recommended": {
        "approach": "Replace task-agent/ralph-loop references and add missing loop cases."
      }
    },
    {
      "task_id": "LEVER-113",
      "title": "Add Rust unit tests for selection and exit codes",
      "model": "gpt-5.1-codex-mini",
      "status": "unstarted",
      "definition_of_done": [
        "Unit tests cover task selection with --task-id, --next, and default.",
        "Unit tests cover stop-reason to exit-code mapping.",
        "cargo test passes."
      ],
      "recommended": {
        "approach": "Keep tests focused on pure helpers to avoid spawning external commands."
      }
    }
  ]
}
